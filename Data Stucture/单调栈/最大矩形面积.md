# 最大矩形面积

## 题面

给你一张柱状图，有n个宽度为1，高度为$h_i$的柱，问柱中最大的矩形面积是多少。

$1\leq n \leq 10^7$

## 做法

利用单调栈从左往右和从右往左分别扫一遍求出每个柱子的右边低于该高度的有边界和左边的左边界。

## Code

```C++
#include<bits/stdc++.h>
signed main() {
    int n; std::cin >> n;
    vector<int> h(n);
    for (auto &v: h) std::cin >> v;
    std::vector<int> st, l(n), r(n);
    for (int i = 0; i < n; i++) {
        for (; !st.empty() && h[st.back()] > h[i]; st.pop_back()) {
            r[st.back()] = i - 1;
        }
        st.push_back(i);
    }
    for (; !st.empty(); st.pop_back()) r[st.back()] = m - 1;
    for (int i = 0; i < n; i++) {
        for (; !st.empty() && h[st.back()] > h[i]; st.pop_back()) {
            l[st.back()] = i + 1;
        }
        st.push_back(i);
    }
    for (; !st.empty(); st.pop_back()) l[st.back()] = 0;
    int ans = 0;
    for (int i = 0; i < n; i++) {
        ans = std::max(ans, h[i] * (r[i] - l[i] + 1));
    }
    std::cout << ans << '\n';
}
```

