# 典型最小延迟调度贪心正确性证明

## 题目

$$
有n个任务，每个任务有截止时间d_i,执行时间t_i,我们称每个任务的延迟为其真实结束时间超过截止时间的时间，如果每次只能执行一个任务，问如何分配使得最大的延迟最小。
$$

## 分析

$$
因为我们要使得最大的延迟最小，所以有个显然的想法是对于每个任务我们都尽可能早于它的d_i开始,且任务与任务之间没有空闲时间。
\\接下来考虑如何分配哪个任务优先执行，不难想象对于任务i,j,d_i<d_j，i的优先级应该比j的优先级高。
\\故，考虑贪心策略，每次都选择先执行当前d_i最小的任务，贪心n次可得到答案。
$$

## 证明

$$
\\\begin{align}
\\&这是一道交换论证的经典题目。
\\&记f_x为任务x的延迟，s_x为任务x的开始时间。
\\&假设A=\{a_1,a_2,\dots,a_i,a_{i+1},\dots,a_n\}为一种最优分配,且记每个任务的开始时间为s_{a_i}，则：
\\&显然A中存在d_{a_i}>d_{a_{i+1}},(否则此时的A符合我们的贪心)，则：
\\&f_{a_i}=s+t_{a_i}-d_{a_i},f_{a_{i+1}}=s+t_{a_i}+t_{a_{i+1}}-d_{a_{i+1}}
\\&考虑交换a_i与a_{i+1}，则：
\\&f'_{a_i}=s+t_{a_i}+t_{a_{i+1}}-d_{a_i},f'_{a_{i+1}}=s+t_{a_{i+1}}-d_{a_{i+1}}
\\&因为d_{a_i}>d_{a_{i+1}}所以max_f\{a_i,a_{i+1}\}=a_{i+1}
\\&因为f'_{a_{i+1}}<f_{a_{i+1}},f'_{a_i}<f_{a_{i+1}},故交换后的f'_{max_f\{a_i,a_{i+1}\}}<f_{max_f\{a_i,a_{i+1}\}}
\\&此时A'=\{a_1,a_2,\dots,a_{i+1},a_i,\dots,a_n\}为更优解，经过C_n^2次交换后可得到最优解为答案
\\&证毕
\\\end{align}
$$

