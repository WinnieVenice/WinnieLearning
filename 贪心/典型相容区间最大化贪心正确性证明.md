# 典型相容区间最大化贪心正确性证明

## 题目

$$
有n个区间[l,r],对任意1\leq i<j\leq n,r_i<=l_j或r_j<=l_i即称区间i,j相容，问最多能有多少个区间相容。
$$

## 分析

$$
有个显然的直觉，对于一个固定的边界我们贪心的选择当前与它相容的最小右边界的区间，这样总选择的区间最小。
$$

## 证明

$$
设集合S=\{s|s\in[1,n],\forall s_i<s_j,r_{s_i}\leq r_{s_j}\},最优解为A=\{s|s\in[1,n],\forall s_i<s_j,r_{s_i}\leq l_{s_j} 或r_{s_j}\leq l_{s_i}\}
$$



### 总命题：

$$
A_k=\{S中前k个相容的区间\}为贪心了k次后的解，则A=A_n
$$

#### 归纳基础:k=1

$$
任取A=\{a_1,a_2,...,a_n\},假设r_{a_1}=min\{r_{a_i}\},不难知r_{s_1}\leq r_{a_1},故A'_1=(A_1-\{a_1\})\cup\{s_1\}也是最优解
$$

#### 归纳假设: $k=\lambda$时命题成立

$$
现证k=\lambda+1时也成立：
\\\begin{align}
\\&根据归纳假设得：A=A_{\lambda}\cup B,假设A_{\lambda}从S中最后选择的区间为y,则:B\subseteq S'=\{s_{y+1},\dots,s_{n}\}
\\&由于A中的区间相容，所以不妨假设S'中的区间与A_{\lambda}的区间都相容，否则从S'删去该区间。
\\&假设r_{b_1}=min\{r_{b_i}\},则:r_{s'_1}\leq r_{b_1},又因为s'_i与A_{\lambda}中的区间相容，所以A'=(A-\{b_1\})\cup\{s'_1\}也是最优解。
\\&显然s'_1=s_{y+1}(若s_{y+1}与s_y不相容，则为s_{y+2}),故:A_{\lambda}\cup\{s'_1\}=A_{\lambda+1}
\\&证毕
\\\end{align}
$$

